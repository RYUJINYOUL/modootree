# ğŸ” ê²€ìƒ‰ í†µí•© ê¸°ëŠ¥ ê°€ì´ë“œ

## ê°œìš”

`serverQdrChat2`ì— ì‹¤ì‹œê°„ ê²€ìƒ‰ ê¸°ëŠ¥ì´ í†µí•©ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ì œ ì‚¬ìš©ìê°€ "ë§›ì§‘ ì¶”ì²œ", "ì—¬í–‰ì§€ ì•Œë ¤ì¤˜" ê°™ì€ ê²€ìƒ‰ í‚¤ì›Œë“œë¥¼ í¬í•¨í•œ ì§ˆë¬¸ì„ í•˜ë©´, ìë™ìœ¼ë¡œ ì›¹ ê²€ìƒ‰ì„ ìˆ˜í–‰í•˜ê³  ê²°ê³¼ë¥¼ ìš”ì•½í•´ì„œ ì œê³µí•©ë‹ˆë‹¤.

## ì£¼ìš” ê¸°ëŠ¥

### 1ï¸âƒ£ ìë™ ê²€ìƒ‰ ê°ì§€
ë‹¤ìŒ í‚¤ì›Œë“œê°€ í¬í•¨ëœ ì§ˆë¬¸ì„ ìë™ìœ¼ë¡œ ê°ì§€í•©ë‹ˆë‹¤:
- ì¶”ì²œ, ì•Œë ¤ì¤˜, ì°¾ì•„ì¤˜, ê²€ìƒ‰
- ë§›ì§‘, ì¹´í˜, ìˆ™ì†Œ, í˜¸í…”
- ì—¬í–‰, ê´€ê´‘, ë‰´ìŠ¤
- ìœ íŠœë¸Œ, ì˜ìƒ, ìŒì•…, ë…¸ë˜

### 2ï¸âƒ£ ë‹¤ì¤‘ ê²€ìƒ‰ ì†ŒìŠ¤
- **NAVER ê²€ìƒ‰**: ì§€ì—­ ì •ë³´, ë§›ì§‘, ì¹´í˜ ë“±
- **Google ê²€ìƒ‰**: ì¼ë°˜ ì›¹ ê²€ìƒ‰
- **YouTube ê²€ìƒ‰**: ì˜ìƒ, ìŒì•… ê²€ìƒ‰

### 3ï¸âƒ£ í˜ì´ì§€ ìŠ¤í¬ë˜í•‘
- `trafilatura` ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ê²€ìƒ‰ ê²°ê³¼ í˜ì´ì§€ì˜ ì‹¤ì œ ë‚´ìš©ì„ ì¶”ì¶œ
- ë” ì •í™•í•˜ê³  ìƒì„¸í•œ ì •ë³´ ì œê³µ

### 4ï¸âƒ£ LLM ìš”ì•½
- ê²€ìƒ‰ ê²°ê³¼ë¥¼ Gemini 2.0 Flashë¡œ ìš”ì•½
- 5~7ê°œ ë¬¸ì¥ìœ¼ë¡œ í•µì‹¬ ì •ë³´ ì „ë‹¬

## ì„¤ì¹˜

### í•„ìˆ˜ íŒ¨í‚¤ì§€
```bash
pip install trafilatura youtube-search requests
```

### í™˜ê²½ ë³€ìˆ˜ (ì„ íƒì‚¬í•­)
ê²€ìƒ‰ í’ˆì§ˆì„ ë†’ì´ë ¤ë©´ ë‹¤ìŒ API í‚¤ë¥¼ ì„¤ì •í•˜ì„¸ìš”:

```yaml
# env.yaml
NAVER_CLIENT_ID: "your_naver_client_id"
NAVER_CLIENT_SECRET: "your_naver_client_secret"
SERPER_KEY: "your_serper_api_key"
```

#### API í‚¤ ë°œê¸‰ ë°©ë²•

**NAVER API**
1. [NAVER Developers](https://developers.naver.com/) ì ‘ì†
2. ì• í”Œë¦¬ì¼€ì´ì…˜ ë“±ë¡
3. ê²€ìƒ‰ API í™œì„±í™”
4. Client IDì™€ Client Secret ë³µì‚¬

**Serper API (Google ê²€ìƒ‰)**
1. [Serper.dev](https://serper.dev/) ì ‘ì†
2. íšŒì›ê°€ì… (ë¬´ë£Œ 2,500 ê²€ìƒ‰/ì›”)
3. API Key ë°œê¸‰

## ì‚¬ìš© ë°©ë²•

### ë°±ì—”ë“œ (`serverQdrChat2/main.py`)

`call_general_chat_llm` í•¨ìˆ˜ê°€ ìë™ìœ¼ë¡œ ê²€ìƒ‰ì´ í•„ìš”í•œ ì¿¼ë¦¬ë¥¼ ê°ì§€í•˜ê³  ì²˜ë¦¬í•©ë‹ˆë‹¤.

```python
# ê²€ìƒ‰ í‚¤ì›Œë“œê°€ í¬í•¨ëœ ê²½ìš° ìë™ìœ¼ë¡œ ê²€ìƒ‰ ìˆ˜í–‰
state = call_general_chat_llm(state)

# ì‘ë‹µì— ê²€ìƒ‰ ê²°ê³¼ í¬í•¨
response = {
    "success": True,
    "response": state["final_response"],  # LLM ìš”ì•½
    "hasSearchResults": True,
    "searchSources": [...]  # ì¶œì²˜ ë¦¬ìŠ¤íŠ¸
}
```

### í”„ë¡ íŠ¸ì—”ë“œ (`app/search-chat/page.tsx`)

ìƒˆë¡œìš´ ê²€ìƒ‰ í†µí•© ì±—ë´‡ í˜ì´ì§€ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.

**ì£¼ìš” ì»´í¬ë„ŒíŠ¸:**
- `SearchSourcesCard`: ê²€ìƒ‰ ê²°ê³¼ ìš”ì•½ + ì¶œì²˜ í‘œì‹œ
- ì €ì¥ ë²„íŠ¼: Firebaseì— ê²€ìƒ‰ ê²°ê³¼ ì €ì¥
- ë‹¤ì‹œ ê²€ìƒ‰ ë²„íŠ¼: ë™ì¼í•œ ì¿¼ë¦¬ë¡œ ì¬ê²€ìƒ‰

**ì ‘ì†:**
```
http://localhost:3000/search-chat
```

## ì‘ë‹µ í˜•ì‹

### ì¼ë°˜ ëŒ€í™” (ê²€ìƒ‰ ì—†ìŒ)
```json
{
  "success": true,
  "response": "ì•ˆë…•í•˜ì„¸ìš”! ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”?",
  "hasSearchResults": false,
  "searchSources": []
}
```

### ê²€ìƒ‰ ê²°ê³¼ í¬í•¨
```json
{
  "success": true,
  "response": "ê°•ë‚¨ì—­ ê·¼ì²˜ ì¸ê¸° ë§›ì§‘ì„ ì†Œê°œí•´ë“œë¦´ê²Œìš”. 1) ì‚¼ê²¹ì‚´ì§‘ â—‹â—‹â—‹ì€ ...",
  "hasSearchResults": true,
  "searchSources": [
    {
      "title": "ê°•ë‚¨ ë§›ì§‘ ë² ìŠ¤íŠ¸ 10",
      "link": "https://example.com/...",
      "snippet": "ê°•ë‚¨ì—­ ê·¼ì²˜ì—ì„œ ê°€ì¥ ì¸ê¸° ìˆëŠ”...",
      "source": "naver"
    },
    ...
  ]
}
```

## Firebase ì €ì¥ êµ¬ì¡°

ê²€ìƒ‰ ê²°ê³¼ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì €ì¥ë©ë‹ˆë‹¤:

```
Firestore
â””â”€â”€ search_results (collection)
    â””â”€â”€ {auto-generated-id} (document)
        â”œâ”€â”€ userId: "user123"
        â”œâ”€â”€ summary: "ê²€ìƒ‰ ìš”ì•½ ë‚´ìš©"
        â”œâ”€â”€ sources: [...]
        â””â”€â”€ createdAt: Timestamp
```

## ê²€ìƒ‰ ë¡œì§ íë¦„

1. **ì˜ë„ íŒŒì•…**: `determine_intent()` - ë©”ëª¨ ì €ì¥ vs ì¼ë°˜ ëŒ€í™” êµ¬ë¶„
2. **ê²€ìƒ‰ ê°ì§€**: `call_general_chat_llm()` - ê²€ìƒ‰ í‚¤ì›Œë“œ ê°ì§€
3. **ê²€ìƒ‰ ìˆ˜í–‰**: `perform_search()` - NAVER/Google/YouTube ë³‘ë ¬ ê²€ìƒ‰
4. **ê²°ê³¼ í•„í„°ë§**: `filter_search_results()` - ì¤‘ë³µ ì œê±° ë° ì •ì œ
5. **ìŠ¤í¬ë˜í•‘**: `scrape_multiple_pages()` - í˜ì´ì§€ ë‚´ìš© ì¶”ì¶œ
6. **LLM ìš”ì•½**: Geminië¡œ ì¢…í•© ìš”ì•½ ìƒì„±
7. **ì‘ë‹µ ë°˜í™˜**: ìš”ì•½ + ì¶œì²˜ ë¦¬ìŠ¤íŠ¸

## ì£¼ì˜ì‚¬í•­

âš ï¸ **API í‚¤ ì—†ì´ë„ ì‘ë™**
- NAVER/Serper API í‚¤ê°€ ì—†ì–´ë„ YouTube ê²€ìƒ‰ê³¼ ê¸°ë³¸ LLM ëŒ€í™”ëŠ” ê°€ëŠ¥
- í’ˆì§ˆ í–¥ìƒì„ ìœ„í•´ API í‚¤ ì„¤ì • ê¶Œì¥

âš ï¸ **ê²€ìƒ‰ í•œë„**
- ë¬´ë£Œ Serper API: 2,500 ê²€ìƒ‰/ì›”
- NAVER API: ì¼ 25,000ê±´

âš ï¸ **ì„±ëŠ¥**
- ìŠ¤í¬ë˜í•‘ ì‹œê°„: 5~7ì´ˆ
- ë³‘ë ¬ ì²˜ë¦¬ë¡œ ìµœì í™”ë¨

## íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### ê²€ìƒ‰ì´ ì‘ë™í•˜ì§€ ì•ŠìŒ
1. `search_api.py`ê°€ ì˜¬ë°”ë¥´ê²Œ importë˜ëŠ”ì§€ í™•ì¸
2. í™˜ê²½ ë³€ìˆ˜ê°€ ì„¤ì •ë˜ì—ˆëŠ”ì§€ í™•ì¸ (ì„ íƒì‚¬í•­)
3. ë¡œê·¸ í™•ì¸: `[ê²€ìƒ‰]` íƒœê·¸ë¡œ ê²€ìƒ‰

### ìŠ¤í¬ë˜í•‘ ì‹¤íŒ¨
- `trafilatura` ì„¤ì¹˜ í™•ì¸: `pip install trafilatura`
- ë°©í™”ë²½/í”„ë¡ì‹œ ì„¤ì • í™•ì¸

### Firebase ì €ì¥ ì‹¤íŒ¨
- `firebase.js`ì—ì„œ `db` export í™•ì¸
- Firestore ê¶Œí•œ ì„¤ì • í™•ì¸

## ê°œë°œì ì°¸ê³ 

### ìƒˆë¡œìš´ íŒŒì¼
- `serverQdrChat2/search_api.py` - ê²€ìƒ‰ ë¡œì§
- `app/search-chat/page.tsx` - ê²€ìƒ‰ ì±—ë´‡ UI
- `app/search-chat/layout.jsx` - ë ˆì´ì•„ì›ƒ
- `app/search-chat/error.tsx` - ì—ëŸ¬ í˜ì´ì§€
- `app/search-chat/loading.tsx` - ë¡œë”© í˜ì´ì§€

### ìˆ˜ì •ëœ íŒŒì¼
- `serverQdrChat2/main.py` - `call_general_chat_llm` í•¨ìˆ˜ ìˆ˜ì •
- `serverQdrChat2/requirements.txt` - íŒ¨í‚¤ì§€ ì¶”ê°€
- `serverQdrChat2/env.yaml` - í™˜ê²½ ë³€ìˆ˜ ì¶”ê°€

## ë¼ì´ì„¼ìŠ¤

MIT License



